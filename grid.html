<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Baseline Grid</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; }
header, footer { font-size: 14px; padding: 4px 8px; background: #f0f0f0; }
.grid-line { stroke: #e0e0e0; stroke-width: 1px; }
.coord { font-size: 10px; fill: #555; }
</style>
</head>
<body>
<header>Grid Visualization</header>
<svg id="grid"></svg>
<footer>Use mouse wheel to zoom and drag to pan</footer>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const headerH = 28;
const footerH = 20;
const width = window.innerWidth;
const height = window.innerHeight - headerH - footerH;

const svg = d3.select("#grid")
  .attr("width", width)
  .attr("height", height);

const gZoom = svg.append("g");

// Zoom
const zoom = d3.zoom().scaleExtent([0.5, 4]).on("zoom", (e)=> gZoom.attr("transform", e.transform));
svg.call(zoom);

const cellW = 100;
const cellH = 60;
const trunkX = width / 2;
const minGX = -10;
const maxGX = 10;
const minGY = -1;
const maxGY = 100;

const bottomOffsetRows = 1;      // shift everything up by 1 row
const offsetY = height - bottomOffsetRows * cellH;

// Draw horizontal lines and y-coordinate labels
for(let gy=minGY; gy<=maxGY; gy++){
    const yPix = offsetY - gy*cellH;
    gZoom.append("line")
        .attr("class","grid-line")
        .attr("x1", trunkX + minGX*cellW)
        .attr("y1", yPix)
        .attr("x2", trunkX + maxGX*cellW)
        .attr("y2", yPix);

    gZoom.append("text")
        .attr("class","coord")
        .attr("x", trunkX + minGX*cellW - 10)
        .attr("y", yPix + 4)
        .text(`y=${gy}, px=${Math.round(yPix)}`);
}

// Draw vertical lines and x-coordinate labels
for(let gx=minGX; gx<=maxGX; gx++){
    const xPix = trunkX + gx*cellW;
    gZoom.append("line")
        .attr("class","grid-line")
        .attr("x1", xPix)
        .attr("y1", offsetY - minGY*cellH)
        .attr("x2", xPix)
        .attr("y2", offsetY - maxGY*cellH);

    gZoom.append("text")
        .attr("class","coord")
        .attr("x", xPix)
        .attr("y", offsetY + 12)
        .text(`x=${gx}, px=${Math.round(xPix)}`);
}
</script>
</body>
</html>
